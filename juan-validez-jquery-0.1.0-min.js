(function(a){a.fn.extend({validate:function(b){var c=true,d,b;d={before:function(){this.removeClass("invalid")},onFailure:function(e){this.addClass("invalid")},onSuccess:function(){}};b=a.extend(d,b);this.each(function(){var g,h,f,e=a(this);if(undefined===e.data("validates")){return}b.before.call(e);if(e.is("[type=checkbox]")){h=(e.is(":checked"))?e.val():""}else{h=e.val()}g=JuanValidez.validate(h,e.data("validates"));f=e.data("compares");if("string"==typeof f){a.each(f.split(" "),function(i,l){var m,k,j;m=l.split(":");k=m[0];j=m[1].split(",");a.each(j,function(o,n){if(!JuanValidez.runValidator(k,h,[a(n).val()])){g.push(k+":"+n)}})})}if(g.length>0){c=false;b.onFailure.call(e,g)}else{b.onSuccess.call(e)}});return c}})})(jQuery);